<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è±†ç“£ç”µå½±top250æ•°æ®çˆ¬å–]]></title>
    <url>%2F2019%2F08%2F10%2F%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1top250%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%2F</url>
    <content type="text"><![CDATA[å£°æ˜Žï¼šä¸€ä¸‹å†…å®¹ä»…ä¾›æŠ€æœ¯å­¦ä¹ ç®€è¿°ï¼šçˆ¬å–è±†ç“£ç”µå½± top 250 çš„åŸºç¡€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”µå½±ðŸŽ¬åï¼Œè¯„åˆ†ï¼Œè¯„ä»·äººæ•°ï¼Œè¯„ä»·äººæ•°ï¼Œä¸»é¢˜æ¦‚è¿°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136package mainimport ( &quot;fmt&quot; &quot;strconv&quot; &quot;net/http&quot; &quot;io&quot; &quot;regexp&quot; &quot;os&quot;)func main() &#123; var start int //èµ·å§‹é¡µ var end int //ç»“æŸé¡µ fmt.Print(&quot;è¯·è¾“å…¥çˆ¬å–çš„èµ·å§‹é¡µ:&quot;) fmt.Scanln(&amp;start) fmt.Print(&quot;è¯·è¾“å…¥çˆ¬å–çš„ç»“æŸé¡µ:&quot;) fmt.Scanln(&amp;end) toWorking(start, end)&#125;func toWorking(start, end int) &#123; fmt.Printf(&quot;èµ·å§‹ç»“æŸé¡µæ˜¯%d : %d\n&quot;, start, end) pageChan := make(chan int) for i := start; i &lt;= end; i++ &#123; go SpiderDoubanPage(i, pageChan) &#125; for i := start; i &lt;= end; i++ &#123; //å¼€å¯åç¨‹ fmt.Printf(&quot;ç¬¬ %d é¡µ çˆ¬å–å®Œæˆ\n&quot;, &lt;-pageChan) &#125;&#125;func SpiderDoubanPage(i int, pageChan chan int) &#123; //https://movie.douban.com/top250?start=0&amp;filter= //https://movie.douban.com/top250?start=25&amp;filter= //https://movie.douban.com/top250?start=50&amp;filter= url := &quot;https://movie.douban.com/top250?start=&quot; + strconv.Itoa((i-1)*25) //çˆ¬å–urlé¡µé¢å†…å®¹ã€æ¨ªå‘çˆ¬å–ã€‘ result, err := httpGetDoubanUrlContent(url) if err != nil &#123; fmt.Println(&quot;err messageï¼š&quot;, err) return &#125; //fmt.Println(result) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžå†…å®¹---ç”µå½±åç§° film_pat := regexp.MustCompile(`width=&quot;100&quot; alt=&quot;(.*?)&quot;`) FilmNames := film_pat.FindAllStringSubmatch(result, -1) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžå†…å®¹---ç”µå½±åˆ†æ•° score_pat := regexp.MustCompile(`v:average&quot;&gt;(?s:(.*?))&lt;`) filmScores := score_pat.FindAllStringSubmatch(result, -1) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžå†…å®¹---è¯„ä»·äººæ•° people_pat := regexp.MustCompile(`&lt;span&gt;(?s:(\d*?))äººè¯„ä»·&lt;/span&gt;`) peopleNum := people_pat.FindAllStringSubmatch(result, -1) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžå†…å®¹---ç”µå½±è¯¦æƒ…é¡µurl film_url_pat := regexp.MustCompile(`&lt;a href=&quot;(.*?)&quot; class=&quot;&quot;&gt;`) filmUrls := film_url_pat.FindAllStringSubmatch(result, -1) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžå†…å®¹---ç”µå½±åºå· film_order_pat := regexp.MustCompile(`&lt;em class=&quot;&quot;&gt;(\d*)&lt;/em&gt;`) filmOrders := film_order_pat.FindAllStringSubmatch(result, -1) //ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æžå†…å®¹---ç”µå½±è¯„è¿° film_summary_pat := regexp.MustCompile(`&lt;span class=&quot;inq&quot;&gt;(.*?)&lt;/span&gt;`) film_summary := film_summary_pat.FindAllStringSubmatch(result, -1) saveToFile(i, filmOrders, FilmNames, filmScores, peopleNum, filmUrls, film_summary) pageChan &lt;- i&#125;func httpGetDoubanUrlContent(url string) (result string, err error) &#123; resp, err1 := http.Get(url) if err1 != nil &#123; err = err1 return &#125; defer resp.Body.Close() buffer := make([]byte, 8192) for &#123; n, err2 := resp.Body.Read(buffer) if n == 0 &#123; fmt.Println(&quot;è¯»å–ç½‘é¡µå®Œæˆ&quot;) break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; err = err2 return &#125; result += string(buffer[:n]) &#125; return&#125;func saveToFile(idx int, filmOrders, filmNames, filmScores, peopleNum, filmUrls, film_summary [][]string) &#123; //å°†è¯»å–åˆ°çš„æ•°æ®å­˜å‚¨å­˜å‚¨ä¸ºæ–‡ä»¶ dir, _ := os.Getwd() filePath := dir + &quot;douban_top_&quot; + strconv.Itoa(idx) + &quot;.txt&quot; file, err := os.Create(filePath) if err != err &#123; fmt.Println(&quot;os Create errï¼š&quot;, err.Error()) return &#125; defer file.Close() //ä¿å­˜å¥½ä¸€ä¸ªæ–‡ä»¶å°±å…³é—­ä¸€ä¸ªæ–‡ä»¶ file.WriteString( &quot;åºå·&quot; + &quot;\t&quot; + &quot;ç”µå½±åç§°&quot; + &quot;\t&quot; + &quot;ç”µå½±è¯„åˆ†&quot; + &quot;\t&quot; + &quot;è¯„ä»·äººæ•°&quot; + &quot;\t&quot; + &quot;é“¾æŽ¥åœ°å€&quot; + &quot;\t&quot; + &quot;ç”µå½±è¯„è¿°&quot; + &quot;\n&quot;) for i := 0; i &lt; len(filmNames); i++ &#123; file.WriteString( filmOrders[i][1] + &quot;\t&quot; + filmNames[i][1] + &quot;\t&quot; + filmScores[i][1] + &quot;\t&quot; + peopleNum[i][1] + &quot;\t&quot; + filmUrls[i][1] + &quot;\t&quot; + film_summary[i][1] + &quot;\n&quot;) &#125;&#125;]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Go</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP foreachå¾ªçŽ¯ä½¿ç”¨&å¼•ç”¨çš„å°å‘]]></title>
    <url>%2F2019%2F08%2F07%2FPHP-foreach%E5%BE%AA%E7%8E%AF%E4%BD%BF%E7%94%A8-%E5%BC%95%E7%94%A8%E7%9A%84%E5%B0%8F%E5%9D%91%2F</url>
    <content type="text"><![CDATA[æºèµ·ï¼šä»Šå¤©æœ‰å°ðŸ”¥ä¼´å‘äº†ä¸€æ®µ PHP ä»£ç é—®æ‰§è¡Œç»“æžœå’Œå¸¸è§„é€»è¾‘æ€è€ƒðŸ¤”ç»“æžœä¸ºå•¥ä¹ˆä¸ä¸€æ ·ã€‚ä»£ç å¦‚ä¸‹ï¼Œå½“æ—¶åªæ˜¯è¯´å’Œ foreach ä½¿ç”¨ &amp; æœ‰å…³ã€‚ä¹Ÿæ²¡æ·±å…¥æ€è€ƒåˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»ï¼Œåˆç¡è¿‡åŽï¼Œå¿ƒè¡€æ¥æ½®çš„æƒ³æžæžè¿™ä¸ªé—®é¢˜ï¼Œæ•…åšå¦‚ä¸‹è®°å½•ã€‚ å°ä¼™ä¼´ç»™çš„åŽŸå§‹ä»£ç å¦‚ä¸‹ 123456789101112131415161718&lt;?php $arr = [1, 2, 4, 8]; foreach ($arr as &amp;$val) &#123; //å››æ¬¡å¾ªçŽ¯è¿­ä»£åŽä¾æ¬¡è¾“å‡º 1, 2, 4, 8; æ²¡ä»»ä½•æ¯›ç—… echo $val . PHP_EOL; &#125; print_r($arr); echo "************************" . PHP_EOL; foreach ($arr as $val) &#123; print_r($arr); echo $val . PHP_EOL; echo "###################" . PHP_EOL; &#125; //echo ä¾æ¬¡æ‰“å°çš„æ˜¯ï¼š 1ï¼Œ2ï¼Œ4ï¼Œ4 [(O_O)]? ä»£ç æ‰§è¡Œç»“æžœå¦‚ä¸‹å›¾ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç¬¬ä¸€æ¬¡è¾“å‡º 1ï¼Œ2ï¼Œ4ï¼Œ8 æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆç¬¬äºŒæ¬¡è¾“å‡ºçš„æ˜¯ 1, 2, 4, 4 è€Œä¸æ˜¯ 1ã€2 4ã€8 å‘¢ï¼ŸæŸ¥è¯¢ PHP foreach æ–‡æ¡£ æœ‰è¾£ä¹ˆä¸€å¥ç‰¹åˆ«æé†’ Warning æ•°ç»„æœ€åŽä¸€ä¸ªå…ƒç´ çš„ $value å¼•ç”¨åœ¨ foreach å¾ªçŽ¯ä¹‹åŽä»ä¼šä¿ç•™ã€‚å»ºè®®ä½¿ç”¨ unset() æ¥å°†å…¶é”€æ¯ã€‚çœ‹æ­¤æç¤ºï¼Œå†¥å†¥ä¹‹ä¸­å¥½åƒçŸ¥é“äº†ç­”æ¡ˆã€‚ ç¬¬ä¸€æ¬¡ foreach ç”±äºŽä½¿ç”¨çš„æ˜¯ &amp; å¼•ç”¨èµ‹å€¼ï¼Œåœ¨å¾ªçŽ¯å®ŒæˆåŽå¦‚æžœæ²¡æœ‰ unset($val) ä¼šä¿ç•™æœ€åŽä¸€ä¸ªå…ƒç´ çš„ $valå¼•ç”¨ ç¬¬äºŒæ¬¡ foreach ç”±äºŽä½¿ç”¨çš„å’Œç¬¬ä¸€æ¬¡åŒæ ·çš„è¿­ä»£å˜é‡ $val, æ•°ç»„çš„æœ€åŽä¸€ä¸ªå…ƒç´  $arr[3] å’Œå½“å‰å¾ªçŽ¯è¿­ä»£å€¼ $val æŒ‡å‘åŒä¸€ä¸ªå˜é‡åœ°å€ï¼Œæ­¤æ—¶ $val å€¼æ”¹å˜æ—¶ $arr[3] çš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜äº†ã€‚ ç”¨ä¸Šå›¾è¯´æ˜Ž åŽŸå§‹æ•°ç»„ä¸ºå›¾ä¸­ AåŒºåŸŸ æ•°ç»„ ç¬¬ 0 æ¬¡å¾ªçŽ¯è¿­ä»£ï¼šæœ€åŽä¸€ä¸ªå…ƒç´  $arr[3] å’Œ $val å³($arr[0]) å€¼ç›¸åŒã€‚$arr[3] = $val = 1ï¼Œå¦‚å›¾ä¸­ 0åŒºåŸŸ 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 1)ç¬¬0æ¬¡å¾ªçŽ¯ç»“æžœï¼š1 ç¬¬ 1 æ¬¡å¾ªçŽ¯è¿­ä»£ï¼šæœ€åŽä¸€ä¸ªå…ƒç´  $arr[3] å’Œ $val å³($arr[1]) å€¼ç›¸åŒã€‚$arr[3] = $val = 2ï¼Œå¦‚å›¾ä¸­ 1åŒºåŸŸ 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 2)ç¬¬1æ¬¡å¾ªçŽ¯ç»“æžœï¼š2 ç¬¬ 2 æ¬¡å¾ªçŽ¯è¿­ä»£ï¼šæœ€åŽä¸€ä¸ªå…ƒç´  $arr[3] å’Œ $val å³($arr[2]) å€¼ç›¸åŒã€‚$arr[3] = $val = 4ï¼Œå¦‚å›¾ä¸­ 2åŒºåŸŸ 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 4)ç¬¬2æ¬¡å¾ªçŽ¯ç»“æžœï¼š4 ç¬¬ 3 æ¬¡å¾ªçŽ¯è¿­ä»£ï¼šæœ€åŽä¸€ä¸ªå…ƒç´  $arr[3] å’Œ $val å³($arr[3]) å€¼ç›¸åŒã€‚$arr[3] = $val = 4ï¼Œå¦‚å›¾ä¸­ 3åŒºåŸŸ 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 4)ç¬¬2æ¬¡å¾ªçŽ¯ç»“æžœï¼š4 ç»¼ä¸Šï¼Œç¬¬äºŒæ¬¡å¾ªçŽ¯ 1, 2, 4, 4 å°±æ˜¯è¿™ä¹ˆæ¥çš„ ðŸ˜œ]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[golangçˆ¬å–ç™¾åº¦è´´å§å†…å®¹]]></title>
    <url>%2F2019%2F08%2F04%2Fgolang%E7%88%AC%E5%8F%96%E7%99%BE%E5%BA%A6%E8%B4%B4%E5%90%A7%E5%86%85%E5%AE%B9%2F</url>
    <content type="text"><![CDATA[çˆ¬è™«å®žçŽ°æ­¥éª¤1ï¼šèŽ·å–éœ€è¦çˆ¬å–URLçš„åœ°å€ï¼ˆä»¥ JavaScriptå§ ä¸¾ä¾‹ï¼‰ http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=0 http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=50 http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=1502ï¼šä½¿ç”¨ http.Get(url) èŽ·å–åˆ°æ¯ä¸€ä¸ªURLçš„å†…å®¹ 3ï¼šå°†æˆ–å¾—åˆ°URLçš„å†…å®¹å†™å…¥æ–‡ä»¶ æ³¨æ„æ–‡ä»¶å‘½å 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102package mainimport ( "fmt" "net/http" "io" "strconv" "os" "time")//è´´å§çš„URL//http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=0//http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=50func main() &#123; start := time.Now() //ç¡®è®¤èµ·å§‹é¡µå’Œç»ˆæ­¢é¡µ var startPage int var endPage int fmt.Print("è¯·è¾“å…¥èµ·å§‹é¡µ:") fmt.Scanln(&amp;startPage) if startPage &lt;= 1 &#123; startPage = 1 &#125; fmt.Print("è¯·è¾“å…¥ç»ˆæ­¢é¡µ:") fmt.Scanln(&amp;endPage) if endPage &lt;= 1 &#123; endPage = 1 &#125; working(startPage, endPage) cost := time.Since(start) fmt.Printf("è€—æ—¶ = [%s] ", cost)&#125;func working(startPage, endPage int) &#123; fmt.Printf("æ­£åœ¨çˆ¬å–ç¬¬%dé¡µåˆ°%dé¡µçš„ä¿¡æ¯...\n", startPage, endPage) pageChan := make(chan int) //å¾ªçŽ¯çˆ¬å–æ¯ä¸€é¡µ for i := startPage; i &lt;= endPage; i++ &#123; //å¼€å¯åç¨‹ go SpiderPage(i, pageChan) //SpiderPage(i, pageChan) &#125; for i := startPage; i &lt;= endPage; i++ &#123; //å¼€å¯åç¨‹ fmt.Printf("ç¬¬ %d é¡µ çˆ¬å–å®Œæˆ\n", &lt;-pageChan) &#125;&#125;//çˆ¬å–å•ä¸ªé¡µé¢çš„å‡½æ•°func SpiderPage(i int, pageChan chan int) &#123; baseUrl := "http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=" + strconv.Itoa((i-1)*50) fmt.Println("æ­£åœ¨èŽ·å–ç¬¬", i, "é¡µçš„å†…å®¹") result, err := httpGetUrl(baseUrl) if err != nil &#123; fmt.Println("http get error, Msg", err.Error()) return &#125; //å°†è¯»å–åˆ°çš„æ•°æ®å­˜å‚¨å­˜å‚¨ä¸ºæ–‡ä»¶ file, err := os.Create("JavaScript_" + strconv.Itoa(i) + ".html") if err != err &#123; fmt.Println("os Create errï¼š", err.Error()) return &#125; file.WriteString(result) file.Close() //ä¿å­˜å¥½ä¸€ä¸ªæ–‡ä»¶å°±å…³é—­ä¸€ä¸ªæ–‡ä»¶ pageChan &lt;- i&#125;//çˆ¬å–å†…å®¹func httpGetUrl(url string) (result string, err error) &#123; resp, err1 := http.Get(url) if err1 != nil &#123; err = err1 return &#125; //å…³é—­ defer resp.Body.Close() //è¯»å–æ•°æ® buffer := make([]byte, 8196) for &#123; //è¯»å–çš„å†…å®¹è‡³äºŽbufferå®¹å™¨ n, err2 := resp.Body.Read(buffer) if n == 0 &#123; fmt.Println("è¯»å–ç½‘é¡µå®Œæˆ") break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; err = err2 return &#125; //ç´¯æ¬¡ç›¸åŠ æ¯ä¸€æ¬¡è¯»åˆ°çš„Bufferæ•°æ®ï¼Œå­˜å…¥result, ä¸€æ¬¡æ€§è¿”å›ž result += string(buffer[:n]) &#125; return`]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Go</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¨‹åºå‘˜æ•°å­¦åŸºç¡€ ä¹‹ çŸ©é˜µ]]></title>
    <url>%2F2019%2F08%2F03%2F%E7%A8%8B%E5%BA%8F%E5%91%98%E6%95%B0%E5%AD%A6%E4%B9%8B%E7%9F%A9%E9%98%B5%2F</url>
    <content type="text"><![CDATA[1ï¼šçŸ©é˜µç›¸åŠ  2ï¼šçŸ©é˜µç›¸ä¹˜ï¼ˆä¸ç¬¦åˆäº¤æ¢å¾‹ï¼‰ æ ‡é‡ * çŸ©é˜µ å˜é‡ * çŸ©é˜µçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çŸ©é˜µ çŸ©é˜µ * çŸ©é˜µ ç”¨çŸ©é˜µçš„ ç¬¬1è¡Œ åˆ†åˆ«åŽ» ä¹˜ä»¥ çŸ©é˜µçš„æ¯ä¸€åˆ— ç”¨çŸ©é˜µçš„ ç¬¬Nè¡Œ åˆ†åˆ«åŽ» ä¹˜ä»¥ çŸ©é˜µçš„æ¯ä¸€åˆ— - çŸ©é˜µA * çŸ©é˜µB != çŸ©é˜µB * çŸ©é˜µA çŸ©é˜µç›¸ä¹˜çš„æ¡ä»¶ï¼šå‰é¢çŸ©é˜µçš„åˆ—æ•° ç­‰äºŽ åŽé¢çŸ©é˜µçš„è¡Œæ•°]]></content>
      <categories>
        <category>æ•°å­¦</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>æ•°å­¦</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[test article]]></title>
    <url>%2F2019%2F08%2F02%2Fpost-test-deploy-hexo%2F</url>
    <content type="text"><![CDATA[Hexo éƒ¨ç½²æµ‹è¯•1ï¼šé€šè¿‡æ—¥å¿—æ–¹å¼ç»Ÿè®¡ 1234567file_put_contents("loc.log", microtime(true).'_end'."-----$lat@2".PHP_EOL, FILE_APPEND);file_put_contents('exelog/'.time().'.log', var_export(Yii::$app-&gt;request-&gt;post(), true));$postdata = file_get_contents("php://input");$postdata = json_decode($postdata,true); 2ï¼šäºŒç»´æ•°ç»„æŒ‡å®šå­—æ®µæŽ’åº12345array_multisort (array_column($citiesMddBaseInfo, â€˜hotâ€™), SORT_DESC, $citiesMddBaseInfo);array_multisort(array_column($hotelList, 'price'), SORT_ASC, $hotelList);array_multisort($hotelList,SORT_ASC, array_column($hotelList, 'price'));]]></content>
      <categories>
        <category>æµ‹è¯•</category>
      </categories>
      <tags>
        <tag>PHP</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
